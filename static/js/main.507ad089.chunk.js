(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{21:function(e,t,r){},29:function(e,t,r){},55:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r(14),a=r.n(c),i=(r(29),r(21),r(16)),s=r(5),o=r(11),l=r(10),u=r.n(l),j=r(13),d="FETCH_SERVICES_REQUEST",b="FETCH_SERVICES_FAILURE",p="FETCH_SERVICES_SUCCESS",h="UPDATE_SERVICE_REQUEST",O="UPDATE_SERVICE_FAILURE",v="UPDATE_SERVICE_SUCCESS",x="FETCH_SERVICE_REQUEST",f="FETCH_SERVICE_FAILURE",E="CHANGE_SERVICE_FIELD",m="FETCH_SERVICE_SUCCESS",y="REMOVE_SERVICE",g=function(){return{type:d}},S=function(){var e=Object(j.a)(u.a.mark((function e(t,r){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(g()),e.prev=1,e.next=4,fetch("".concat("http://localhost:7070/api/services","/").concat(r),{method:"DELETE",headers:{"Content-Type":"application/json"}});case 4:if((n=e.sent).ok){e.next=7;break}throw new Error(n.statusText);case 7:t(k()),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t(T(e.t0.message));case 13:_(t);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,r){return e.apply(this,arguments)}}(),_=function(){var e=Object(j.a)(u.a.mark((function e(t){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(g()),e.prev=1,e.next=4,fetch("".concat("http://localhost:7070/api/services"));case 4:if((r=e.sent).ok){e.next=7;break}throw new Error(r.statusText);case 7:return e.next=9,r.json();case 9:n=e.sent,t({type:p,payload:{items:n}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t((c=e.t0.message,{type:b,payload:{error:c}}));case 16:case"end":return e.stop()}var c}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(j.a)(u.a.mark((function e(t,r){var n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:x}),e.prev=1,e.next=4,fetch("".concat("http://localhost:7070/api/services","/").concat(r));case 4:if((n=e.sent).ok){e.next=7;break}throw new Error(n.statusText);case 7:return e.next=9,n.json();case 9:c=e.sent,t({type:m,payload:{item:c}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t((a=e.t0.message,{type:f,payload:{error:a}}));case 16:case"end":return e.stop()}var a}),e,null,[[1,13]])})));return function(t,r){return e.apply(this,arguments)}}(),w=function(e,t,r){return{type:h,payload:{name:e,price:t,content:r}}},T=function(e){return{type:O,payload:{error:e}}},k=function(){return{type:v}},R=function(){var e=Object(j.a)(u.a.mark((function e(t,r,n,c,a){var i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(w()),e.prev=1,i={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:r,name:n,price:c,content:a})},e.next=5,fetch("http://localhost:7070/api/services",i);case 5:if(!(s=e.sent).ok){e.next=11;break}return t(k()),e.abrupt("return",s);case 11:t(T("error"));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),t(T(e.t0.message));case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,r,n,c,a){return e.apply(this,arguments)}}(),F=r(17),I=r.n(F),U=r(1);function V(e){var t=e.match,r=Object(o.c)((function(e){return e.serviceEdit})),c=r.item,a=r.loading,i=r.error,l=r.redirect,u=Object(o.b)(),j=Object(s.g)();if(Object(n.useEffect)((function(){C(u,t.params.id)}),[u,t.params.id]),l&&j.push("/services"),a)return Object(U.jsx)(I.a,{type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3});if(i)return Object(U.jsx)("div",{className:"errorBlock",children:Object(U.jsx)("p",{className:"errorText",children:"Something went wrong try again"})});var d=function(e){var t=e.target,r=t.name,n=t.value;u(function(e,t){return{type:E,payload:{name:e,value:t}}}(r,n))};return l?null:Object(U.jsx)("form",{id:"form",onSubmit:function(e){e.preventDefault();var r=e.target;R(u,t.params.id,r.name.value,r.price.value,r.content.value)},children:Object(U.jsx)("table",{children:Object(U.jsxs)("tbody",{children:[Object(U.jsxs)("tr",{children:[Object(U.jsx)("td",{children:Object(U.jsx)("label",{htmlFor:"name",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"})}),Object(U.jsx)("td",{children:Object(U.jsx)("input",{id:"name",name:"name",onChange:d,value:c.name})})]}),Object(U.jsxs)("tr",{children:[Object(U.jsx)("td",{children:Object(U.jsx)("label",{htmlFor:"satisfaction",children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c"})}),Object(U.jsx)("td",{children:Object(U.jsx)("input",{id:"price",name:"price",onChange:d,value:c.price})})]}),Object(U.jsxs)("tr",{children:[Object(U.jsx)("td",{children:Object(U.jsx)("label",{htmlFor:"content",children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"})}),Object(U.jsx)("td",{children:Object(U.jsx)("input",{id:"content",name:"content",onChange:d,value:c.content})})]}),Object(U.jsxs)("tr",{children:[Object(U.jsx)("td",{children:Object(U.jsx)("button",{type:"cancel",onClick:function(){j.push("/services")},children:"\u041e\u0442\u043c\u0435\u043d\u0430"})}),Object(U.jsx)("td",{children:Object(U.jsx)("button",{type:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]})]})})})}function N(e){var t=Object(o.c)((function(e){return e.serviceList})),r=t.items,c=t.loading,a=t.error,i=Object(o.b)(),l=Object(s.g)();Object(n.useEffect)((function(){_(i)}),[i]);return c?Object(U.jsx)(I.a,{type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3}):a?Object(U.jsx)("div",{className:"errorBlock",children:Object(U.jsx)("p",{className:"errorText",children:"Something went wrong try again"})}):Object(U.jsx)("table",{children:Object(U.jsx)("tbody",{children:r.map((function(e){return Object(U.jsxs)("tr",{children:[Object(U.jsx)("td",{children:e.name}),Object(U.jsx)("td",{children:e.price}),Object(U.jsxs)("td",{children:[Object(U.jsx)("button",{onClick:function(){return t=e.id,void l.push("/services/".concat(t));var t},children:"\\"}),Object(U.jsx)("button",{onClick:function(){return t=e.id,void S(i,t);var t},children:"x"})]})]},e.id)}))})})}function D(){return Object(U.jsx)("div",{className:"App",children:Object(U.jsx)(i.a,{children:Object(U.jsxs)(s.d,{children:[Object(U.jsx)(s.b,{exact:!0,path:"/",children:Object(U.jsx)(s.a,{to:"/services"})}),Object(U.jsx)(s.b,{path:"/services",exact:!0,component:N}),Object(U.jsx)(s.b,{path:"/services/:id",component:V})]})})})}var A=r(23),L=r(3),H={items:[],loading:!1,error:null};var P=r(18),B={item:{name:"",price:"",content:""},loading:!1,error:null,redirect:!1};var X=Object(A.a)({serviceList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(L.a)(Object(L.a)({},e),{},{loading:!0,error:null});case b:var r=t.payload.error;return Object(L.a)(Object(L.a)({},e),{},{loading:!1,error:r});case p:var n=t.payload.items;return Object(L.a)(Object(L.a)({},e),{},{items:n,loading:!1,error:null});case y:var c=t.payload.id;return Object(L.a)(Object(L.a)({},e),{},{items:e.items.filter((function(e){return e.id!==c}))});default:return e}},serviceEdit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:case x:return Object(L.a)(Object(L.a)({},e),{},{loading:!0,error:null});case m:var r=t.payload.item;return{item:r,loading:!1,error:null,redirect:!1};case f:var n=t.payload.error;return Object(L.a)(Object(L.a)({},e),{},{loading:!1,error:n});case O:var c=t.payload.updateError;return Object(L.a)(Object(L.a)({},e),{},{loading:!1,error:c});case v:return Object(L.a)(Object(L.a)({},B),{},{redirect:!0});case E:var a=t.payload,i=a.name,s=a.value,o=e.elem;return Object(L.a)(Object(L.a)({},e),{},{item:Object(L.a)(Object(L.a)({},o),{},Object(P.a)({},i,s))});case d:return Object(L.a)(Object(L.a)({},e),{},{redirect:!1});default:return e}}}),J=Object(A.b)(X,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());a.a.render(Object(U.jsx)(o.a,{store:J,children:Object(U.jsx)(D,{})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.507ad089.chunk.js.map